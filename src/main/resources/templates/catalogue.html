<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE-edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="https://use.fontawesome.com/be1ba39dfe.js"></script>
        <link rel="stylesheet" th:href="@{/css/layout.css}">
        <link rel="stylesheet" th:href="@{/css/catalogue.css}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    </head>
    <body>
        <div class="catalogue-page-content">
            <section>
                <header th:replace="~{layout::header}"></header>
            </section>
            <section>
                <div class="page-title-container">
                    <h1 class="page-title">Book Catalogue</h1>
                </div>
                <div th:replace="~{layout::catalogue-navbar}"></div>
            </section>
            <section class="section-body">
                <div class="gallery-main">
                    <!-- Adventure -->
                    <div class="Adventure" id="Adventure">
                        <h2>Adventure</h2>
                        <div class="gallery">
                            <div class="image-holder" th:each="book : ${adventureBooks}">
                                <a th:href="@{/description(title=${book.title}, author=${book.author},
                            description=${book.description}, thumbnail=${book.coverImageUrl})}">
                                    <img th:src="${book.coverImageUrl}" alt="book cover">
                                </a>
                                <div class="desc">
                                    <h3 th:text="${book.title}"></h3>
                                    <p th:text="${book.author}"></p>
                                    <p th:text="${book.price}"></p>
                                    <!-- Other book details -->
                                    <button onclick="addToCart('${book.title}', '${book.coverImageUrl}', '${book.price}')">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Fantasy -->
                    <div class="Fantasy" id="Fantasy">
                        <h2>Fantasy</h2>
                        <div class="gallery">
                            <div class="image-holder" th:each="book : ${fantasyBooks}">
                                <a th:href="@{/description(title=${book.title}, author=${book.author},
                            description=${book.description}, thumbnail=${book.coverImageUrl})}">
                                    <img th:src="${book.coverImageUrl}" alt="book cover">
                                </a>
                                <div class="desc">
                                    <h3 th:text="${book.title}"></h3>
                                    <p th:text="${book.author}"></p>
                                    <p th:text="${book.price}"></p>
                                    <!-- Other book details -->
                                    <button onclick="addToCart('${book.title}', '${book.coverImageUrl}', '${book.price}')">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Thriller -->
                    <div class="Thriller" id="Thriller">
                        <h2>Thriller</h2>
                        <div class="gallery">
                            <div class="image-holder" th:each="book : ${thrillerBooks}">
                                <a th:href="@{/description(title=${book.title}, author=${book.author},
                            description=${book.description}, thumbnail=${book.coverImageUrl})}">
                                    <img th:src="${book.coverImageUrl}" alt="book cover">
                                </a>
                                <div class="desc">
                                    <h3 th:text="${book.title}"></h3>
                                    <p th:text="${book.author}"></p>
                                    <p th:text="${book.price}"></p>
                                    <!-- Other book details -->
                                    <button onclick="addToCart('${book.title}', '${book.coverImageUrl}', '${book.price}')">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Biography -->
                    <div class="Biography" id="Biography">
                        <h2>Biography</h2>
                        <div class="gallery">
                            <div class="image-holder" th:each="book : ${biographyBooks}">
                                <a th:href="@{/description(title=${book.title}, author=${book.author},
                            description=${book.description}, thumbnail=${book.coverImageUrl})}">
                                    <img th:src="${book.coverImageUrl}" alt="book cover">
                                </a>
                                <div class="desc">
                                    <h3 th:text="${book.title}"></h3>
                                    <p th:text="${book.author}"></p>
                                    <p th:text="${book.price}"></p>
                                    <!-- Other book details -->
                                    <button onclick="addToCart('${book.title}', '${book.coverImageUrl}', '${book.price}')">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Romance -->
                    <div class="Romance" id="Romance">
                        <h2>Romance</h2>
                        <div class="gallery">
                            <div class="image-holder" th:each="book : ${romanceBooks}">
                                <a th:href="@{/description(title=${book.title}, author=${book.author},
                            description=${book.description}, thumbnail=${book.coverImageUrl})}">
                                    <img th:src="${book.coverImageUrl}" alt="book cover">
                                </a>
                                <div class="desc">
                                    <h3 th:text="${book.title}"></h3>
                                    <p th:text="${book.author}"></p>
                                    <p th:text="${book.price}"></p>
                                    <!-- Other book details -->
                                    <button onclick="addToCart('${book.title}', '${book.coverImageUrl}', '${book.price}')">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cooking -->
                    <div class="Cooking" id="Cooking">
                        <h2>Cooking</h2>
                        <div class="gallery">
                            <div class="image-holder" th:each="book : ${cookingBooks}">
                                <a th:href="@{/description(title=${book.title}, author=${book.author},
                            description=${book.description}, thumbnail=${book.coverImageUrl})}">
                                    <img th:src="${book.coverImageUrl}" alt="book cover">
                                </a>
                                <div class="desc">
                                    <h3 th:text="${book.title}"></h3>
                                    <p th:text="${book.author}"></p>
                                    <p th:text="${book.price}"></p>
                                    <button onclick="addToCart('${book.title}', '${book.coverImageUrl}', '${book.price}')">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Comedy -->
                    <div class="Comedy" id="Comedy">
                        <h2>Comedy</h2>
                        <div class="gallery">
                            <div class="image-holder" th:each="book : ${comedyBooks}">
                                <a th:href="@{/description(title=${book.title}, author=${book.author},
                            description=${book.description}, thumbnail=${book.coverImageUrl})}">
                                    <img th:src="${book.coverImageUrl}" alt="book cover">
                                </a>
                                <div class="desc">
                                    <h3 th:text="${book.title}"></h3>
                                    <p th:text="${book.author}"></p>
                                    <p th:text="${book.price}"></p>
                                    <button onclick="addToCart('${book.title}', '${book.coverImageUrl}', '${book.price}')">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- History -->
                    <div class="History" id="History">
                        <h2>History</h2>
                        <div class="gallery">
                            <div class="image-holder" th:each="book : ${historyBooks}">
                                <a th:href="@{/description(title=${book.title}, author=${book.author},
                            description=${book.description}, thumbnail=${book.coverImageUrl})}">
                                    <img th:src="${book.coverImageUrl}" alt="book cover">
                                </a>
                                <div class="desc">
                                    <h3 th:text="${book.title}"></h3>
                                    <p th:text="${book.author}"></p>
                                    <p th:text="${book.price}"></p>
                                    <button onclick="addToCart('${book.title}', '${book.coverImageUrl}', '${book.price}')">
                                        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section>
                <div class="btn">
                    <a th:href="@{/}">Back <i class="fa fa-arrow-right" aria-hidden="true"></i></a>
                </div>
            </section>
            <section>
                <footer th:replace="~{layout::footer}"></footer>
            </section>
        </div>
    </body>
    <script>
        function toggleNav() {
            const navPopup = document.getElementById('nav-popup');
            const navbarContainer = document.getElementById('navbar-container');
            if (navPopup.style.width === '0px' || navPopup.style.width === '') {
                // Show the navigation bar
                navPopup.style.width = '250px';
                navPopup.style.left = '0';
                navbarContainer.style.left = '0';
            } else {
                // Hide the navigation bar
                navPopup.style.width = '0';
                navPopup.style.left = '-250px';
                navbarContainer.style.left = '-250px';
            }
        }

        function addToCart(title, coverImageUrl, price) {
            const item = { title, coverImageUrl, price };

            let cart = JSON.parse(localStorage.getItem('cart')) || [];

            cart.push(item);

            localStorage.setItem('cart', JSON.stringify(cart));

            displayCart();
        }

        function displayCart() {
            const cartItemsContainer = document.getElementById('cart-items-container');

            const cart = JSON.parse(localStorage.getItem('cart')) || [];

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p>You have no books in your cart</p> ';
            } else {
                cartItemsContainer.innerHTML = ''; // Clear previous items
                cart.forEach((item, index) => {
                    const cartItem = document.createElement('div');
                    cartItem.innerHTML = `
                <span>${index + 1}.</span>
                <img src="${item.coverImageUrl}" alt="Book Cover">
                <span>${item.title}</span>
                <span>${item.price}</span>
            `;

                    cartItemsContainer.appendChild(cartItem);
                });
            }

            // Show the cart-popup
            toggleCartPopup(); // Show the cart popup when updating cart content
        }

        function toggleCartPopup() {
            const cartPopup = document.getElementById('cart-popup');
            const overlay = document.getElementById('overlay');
            if (cartPopup.style.width === '0px' || cartPopup.style.width === '') {
                // Show the cart pop-up bar
                cartPopup.style.width = '350px';
                overlay.style.display = 'block';
            } else {
                // Hide the cart pop-up bar
                const cartPopup = document.getElementById('cart-popup');
                const overlay = document.getElementById('overlay'); // Get the overlay element
                cartPopup.style.width = '0';
                overlay.style.display = 'none';
            }
        }

        function hideCartPopup() {
            console.log('hideCartPopup() function is triggered');
            const cartPopup = document.getElementById('cart-popup');
            const overlay = document.getElementById('overlay'); // Get the overlay element
            cartPopup.style.width = '0';
            overlay.style.display = 'none'; // Hide the overlay
        }

        function checkout() {
            console.log('checkout() function is triggered');
            alert('Checkout clicked!');
        }
    </script>
</html>